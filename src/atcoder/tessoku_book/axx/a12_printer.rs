// https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_l

fn calc(mid: usize, x: usize, a: &Vec<usize>) -> bool {
    let total: usize = a.iter().map(|num| {
        mid / num
    }).sum();

    if total >= x {
        true
    } else {
        false
    }
}

fn run(_n: usize, k: usize, a: Vec<usize>) -> usize {
    let mut left = 0;
    let mut right = 1_000_000_000;

    while left < right {
        let middle = (left + right) / 2;

        if calc(middle, k, &a) {
            right = middle
        } else {
            left = middle + 1
        }

    }

    left
}

#[cfg(test)]
mod tests {
    use super::*;

    struct TestCase(usize, usize, Vec<usize>, usize);

    #[test]
    fn tessoku_a12() {
        let tests = [
            TestCase(4, 10, vec![1, 2 ,3, 4], 6),
            TestCase(87, 350, vec![477, 240, 331, 305, 257, 90, 116, 424, 396, 241, 305, 367, 476, 347, 356, 117, 66, 135, 35, 335, 322, 208, 67, 465, 29, 64, 108, 261, 19, 153, 18, 307, 243, 322, 79, 313, 498, 490, 158, 101, 175, 117, 274, 97, 297, 27, 21, 181, 323, 451, 466, 60, 498, 87, 113, 347, 472, 123, 210, 202, 289, 61, 229, 76, 235, 299, 476, 436, 373, 278, 176, 241, 226, 209, 81, 396, 311, 313, 385, 132, 412, 78, 479, 315, 333, 148, 482], 556),
            TestCase(83, 209, vec![317, 131, 187, 121, 88, 414, 6, 78, 90, 289, 148, 17, 329, 213, 285, 468, 427, 324, 377, 364, 314, 133, 385, 307, 478, 97, 116, 182, 223, 463, 278, 276, 250, 452, 3, 168, 157, 291, 363, 397, 173, 260, 147, 396, 410, 449, 180, 84, 267, 474, 207, 237, 201, 307, 219, 316, 320, 202, 72, 407, 87, 56, 156, 282, 157, 393, 44, 411, 393, 269, 399, 12, 421, 206, 180, 136, 340, 163, 219, 145, 121, 240, 498], 240),
            TestCase(38, 463, vec![472, 127, 151, 351, 49, 459, 269, 431, 109, 130, 478, 83, 214, 145, 376, 458, 432, 77, 33, 474, 308, 469, 212, 148, 379, 487, 44, 442, 419, 69, 148, 102, 250, 394, 90, 178, 42, 53], 1666),
            TestCase(37, 289, vec![180, 2, 350, 52, 16, 329, 130, 96, 471, 284, 453, 41, 381, 154, 241, 153, 51, 400, 491, 126, 267, 439, 51, 490, 350, 11, 350, 131, 256, 389, 116, 247, 186, 412, 332, 497, 281], 357),
        ];

        for TestCase(n, k, a, expected) in tests {
            assert_eq!(run(n, k, a), expected);
        }
    }
}
