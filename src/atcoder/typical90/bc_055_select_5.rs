// https://atcoder.jp/contests/typical90/tasks/typical90_bc
// Refactoring 3つ目のテストが時間かかるので計算量減らす?

#[allow(unused, dead_code)]
pub fn run(n: usize, p: usize, q: usize, vec: Vec<usize>) -> usize {
    let mut ans = 0;

    for i in 0..n {
        for j in i+1..n {
            for k in j+1..n {
                for l in k+1..n {
                    for m in l+1..n {
                        if vec[i]%p * vec[j]%p * vec[k]%p * vec[l]%p * vec[m]% p == q {
                            ans += 1;
                        };
                    }
                }

            }
        }
    }

    ans
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test() {
        assert_eq!(1, run(6, 7, 1, vec![1, 2, 3, 4, 5, 6]));
        assert_eq!(252, run(10, 1, 0, vec![0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
        // assert_eq!(5, run(100, 900073469, 27198379, vec![974798105, 539940724, 801439788, 905671968, 658295793, 388137716, 908461327, 318149754, 374921464, 178868414, 354553195, 542023105, 487724791 ,539316905, 529786501, 781612612, 187331071, 649829174, 637616071, 474206244, 822013408, 197330879, 207304991, 650182205, 700497206, 8484693, 926098642, 520741696, 940644683, 617163216, 38007898, 439615806, 947749275, 637649330, 497680547, 257899920, 877993105, 186703817, 86354567, 727250015, 742762091, 710604928, 299574444, 974307332, 222897416, 974240020, 108625380, 350845564, 22845803, 314550738, 776009099, 134787043, 426337063, 809931447, 602433436, 218291621, 407752031, 75924578, 884642851, 735863416, 67456887, 63309721, 279008407, 567238489, 112719512, 42010308, 588088256, 33105876, 852647823, 962051210, 125970996,832974131, 115962735, 111274944, 310551242, 96446917, 725579071, 716255709, 382056807, 184471335, 608972603, 643925025, 345143460, 677486616, 760391460, 241350298, 256549658, 739317695, 378465758, 730331287, 978654572, 344761569, 582187076,  644660173, 322045104, 435076132, 842421072, 233565333, 651352011, 67645657]));
    }
}
